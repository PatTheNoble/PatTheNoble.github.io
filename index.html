<!DOCTYPE html>

<html lang="en" class="PM">
<title> Patrick Morris' Personal Page</title>

<head>
    <meta charset="utf-8" name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="favicon.svg" type="image/svg+xml">
    <link rel="alternate icon" href="favicon.ico">
    <link rel="mask-icon" href="favicon.svg" color="#ff8a01">
</head>

<body>
    <nav id="navbar" class="PM">
        <span class="PM"><a href="#home">Home</a></span>
        <span class="PM"><a href="#about">About</a></span>
        <span class="PM"><a href="#tech-stack">Skills</a></span>
        <span class="PM"><a href="#portfolio">Portfolio</a></span>
        <span class="PM hamburger"><a href="#home"><img src="Hamburger.svg" alt="Hamburger"
                    style="width: 25px;"></a></span>
    </nav>

    <aside class="left-bar">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </aside>
    <aside class="gear-container">
        <img src="Gear.svg" alt="Gear" class="gear" style="left: 150px; top: -250px;">
    </aside>
    <p class="name">
        Patrick Morris
    </p>


    <section id="home" class="content">
        <img src="Patrick2.jpg" alt="Picture of me" class="profile" onclick=getRepos()>
    </section>

    <section id="about" class="content">
        <h1>About: </h1>
        <div class="about">
            I am Patrick Morris: Indie Game Developer, Web Developer, Artist, Programmer, Gamer. I am not your average
            developer... Lorem Ipsum delore blablabla
        </div>
    </section>

    <section id="tech-stack" class="content">
        <h1>Tech Stack:</h1>
        <div class="skills grid-container">
            <div>
                <img src="React.svg" alt="React" class="PM skills grid-item"></img>
                <p>React</p>
            </div>
            <div>
                <img src="CSS3.svg" alt="CSS3" class="PM skills grid-item"></img>
                <p>CSS3</p>
            </div>
            <div>
                <img src="HTML5.svg" alt="HTML5" class="PM skills grid-item"></img>
                <p>HTML5</p>
            </div>
            <div>
                <img src="Nextjs.svg" alt="Next.js" class="PM skills grid-item"></img>
                <p>Next.js</p>
            </div>
            <div>
                <img src="JQuery.svg" alt="JQuery" class="PM skills grid-item"></img>
                <p>JQuery</p>
            </div>
            <div>
                <img src="JS.svg" alt="Java Script" class="PM skills grid-item"></img>
                <p>Java Script</p>
            </div>
            <div>
                <img src="Git.svg" alt="Git" class="PM skills grid-item"></img>
                <p>Git</p>
            </div>
            <div>
                <img src="Github.svg" alt="Github" class="PM skills grid-item"></img>
                <p>Github</p>
            </div>
        </div>
    </section>


    <aside class="gear-container">
        <img src="Gear.svg" alt="Gear" class="gear" style="left: 50px; top: -250px">
        <img src="Gear.svg" alt="Gear" class="gear" style="right: -350px; top: -550px;">
        <br><br><br><br><br><br><br><br>
    </aside>

    <section id="portfolio">
        <div class="content" style="position: relative;">
            <h1>Portfolio:</h1>
            <p>
                The projects below are all pulled directly off of my <a href="https://github.com/PatTheNoble">github
                    page</a> using the Github Rest API.
                You can find the code <a href="https://github.com/PatTheNoble/PatTheNoble.github.io">here:</a>
            </p>
        </div>
        <!-- 
            Portfolio items are inserted here through JS in a format like so:
            <div class="portfolio-container">
                <div>
                    <h1>Title</h1>
                    <p>This is the repo content...</p>
                </div>
                ...
            </div>
        -->

    </section>



    <script type="module">
        import { Octokit } from "https://cdn.skypack.dev/@octokit/core";

        async function getRepos() {
            // FETCH DATA
            const githubDataRes = await fetch("https://enigmatic-cove-66469.herokuapp.com/github-data");
            const githubData = await githubDataRes.json();
            const repos = githubData.data.repos;
            const readMes = githubData.data.readMes;

            // CREATE PORTFOLIO LIST
            const portfolioList = document.createElement("div");
            portfolioList.className = "portfolio-container content";
            document.getElementById("portfolio").appendChild(portfolioList);

            // LOOP THROUGH REPOSISTORIES
            for (var i = 0; i < repos.data.length; i++) {
                var currentName = repos.data[i].name;

                const currentTopics = repos.data[i].topics;
                if (!currentTopics.includes("portfolio")) {
                    continue;
                }

                // HANDLE GITHUB CONTENT
                var githubContentContainer = document.createElement("div");
                githubContentContainer.className = "github-content";
                portfolioList.appendChild(githubContentContainer);
                var githubContent = document.createElement("div");
                githubContent.className = "portfolio-item";
                githubContentContainer.appendChild(githubContent);
                githubContent.innerHTML = atob(readMes[i].data.content); //atob function decodes the base64 encoding.

                // HANDLE TITLE
                var portfolioTitle = document.createElement("h1");
                portfolioTitle.innerText = currentName;
                // var githubLink = document.createElement("button");
                // githubLink.innerText = "Github";
                // portfolioTitle.append(githubLink);
                githubContent.prepend(portfolioTitle);

                // ADD TAGS
                var tagsContainer = document.createElement("div");
                tagsContainer.className = "tags"; //skills grid-container 
                githubContentContainer.prepend(tagsContainer);
                for (var j = 0; j < repos.data[i].topics.length; j++) {
                    var currentTagStr = repos.data[i].topics[j];
                    if(currentTagStr === "portfolio"){
                        continue;
                    }

                    var currentTag = document.createElement("div");
                    currentTag.innerText = currentTagStr;
                    tagsContainer.append(currentTag);
                    console.log(currentTagStr);
                }
            }
        }
        getRepos();
    </script>
</body>

</html>